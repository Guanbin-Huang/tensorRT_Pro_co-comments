{"version":3,"sources":["webpack:///./src/App.vue?8552","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/http/echo.js","webpack:///./src/components/error.vue?b681","webpack:///./src/components/error.vue","webpack:///src/components/error.vue","webpack:///src/components/home.vue","webpack:///./src/components/home.vue?fe0f","webpack:///./src/components/home.vue","webpack:///./src/tools/tips.js","webpack:///./src/router/router.js","webpack:///./src/vuex/vuex.js","webpack:///./src/tools/tools.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","axios","defaults","timeout","baseURL","withCredentials","duplicateQueryManager","obj","Object","_queryingURLs","isQuerying","url","add","remove","preQueryCallback","endQueryCallback","mergeMap","target","src","k","preprocessQueryParameters","param","omap","key","value","JSON","stringify","qs","Echo","query","_url","data","_data","defResp","_defResp","then","callback","_then","_send","catch","_catch","config","_config","binary_resp","_binary_resp","loadingSilence","_loadingSilence","tipsSilence","_tipsSilence","post","get","_alreadyQuery","msg","headers","Content-Type","X-Requested-With","type","console","log","q","response","status","message","e","dispatchData","code","now","Date","hasOwnProperty","header","setPreQueryCallback","setEndQueryCallback","Vue","prototype","$echo","components_error","_v","src_components_error","error_normalizeComponent","home","uploadFileSelectCallback","detectResultJson","methods","fileChange","files","$refs","uploadImage","length","$message","warning","openFileDialog","click","loadImage","image","Image","onload","drawImageAndLabel","boxarray","undefined","cvs","previewImageCanvas","context","getContext","imageWidth","width","imageHeight","height","canWidth","canHeight","scale","Math","min","dx","dy","dr","db","clearRect","drawImage","font","save","translate","colors","i","box","color","class_label","label","class_name","beginPath","lineWidth","strokeStyle","rect","left","top","right","bottom","stroke","fillStyle","fillText","confidence","toFixed","restore","dotest","_this","file","reader","FileReader","result","base64_data","token_begin","indexOf","clean_data","substring","readAsDataURL","init","[object Object]","components_home","_vm","staticClass","ref","staticStyle","display","accept","multiple","on","change","rows","placeholder","readonly","model","$$v","expression","src_components_home","home_normalizeComponent","pack_opt","opt_or_message","title","opt","Tips","success","ElementUI","Notification","error","info","tip","$tips","use","Router","originalPush","push","location","call","err","routes","path","component","Home","Error","router","mode","beforeEach","to","from","next","Vuex","vuex","Store","state","userInfo","mutations","updateUser","Tools","clone","o","Array","len","j","VueCookies","window","productionTip","loadingLayer","Loading","service","fullscreen","lock","text","background","close","el","store","components","App","template"],"mappings":"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","file":"static/js/app.c6a9a788725bb8db467d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3964c03a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3964c03a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3964c03a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import axios from 'axios'\r\nimport qs from 'qs'\r\nimport Vue from \"vue\"\r\n\r\naxios.defaults.timeout = 10000\r\naxios.defaults.baseURL = ''\r\naxios.defaults.withCredentials = false\r\n\r\n//请求中的的url做保存，一旦请求完毕则移除掉\r\nconst DuplicateQueryManager = ()=>{\r\n\r\n  var obj = new Object()\r\n  obj._queryingURLs = {}\r\n  obj.isQuerying = (url) => {\r\n    return url in obj._queryingURLs\r\n  }\r\n\r\n  obj.add = (url) => {\r\n    obj._queryingURLs[url] = true\r\n  }\r\n\r\n  obj.remove = (url) => {\r\n    if(obj.isQuerying(url))\r\n      delete obj._queryingURLs[url]\r\n  }\r\n  return obj\r\n}\r\n\r\n//重复请求管理器\r\nconst duplicateQueryManager = DuplicateQueryManager()\r\nlet preQueryCallback = null   //请求前的回调\r\nlet endQueryCallback = null   //请求后的回调\r\n\r\n//请求前的调用，回调函数没有给予参数\r\nfunction setPreQueryCallback(callback){\r\n  preQueryCallback = callback\r\n}\r\n\r\n//请求结束后的调用，无论是否发生错误都会调用，返回的参数带有一个data参数，是服务器返回的data\r\nfunction setEndQueryCallback(callback){\r\n  endQueryCallback = callback\r\n}\r\n\r\nfunction mergeMap(target, src){\r\n  if(target == null){\r\n    return src\r\n  }else if(src != null){\r\n    for(let k in src)\r\n      target[k] = src[k]\r\n  }\r\n  return target\r\n}\r\n\r\nfunction preprocessQueryParameters(param){\r\n\r\n  if(typeof(param) == \"string\"){\r\n    return param;\r\n  }\r\n\r\n  let omap = {}\r\n  for(let key in param){\r\n    let value = param[key]\r\n    if(typeof(value) == \"object\"){\r\n      value = JSON.stringify(value)\r\n    }\r\n    omap[key] = value\r\n  }\r\n  return qs.stringify(omap)\r\n}\r\n\r\n//定义echo对象\r\nconst Echo = (url) => {\r\n  var query = new Object();\r\n  query._url = url  \r\n\r\n  /******************************公开的函数定义******************************/\r\n  query.data = (data) =>{\r\n    query._data = data\r\n    return query\r\n  }\r\n\r\n  query.defResp = (data) =>{\r\n    query._defResp = data\r\n    return query\r\n  }\r\n\r\n  //then返回的数据已经拨离了外层，返回的是msg\r\n  query.then = (callback) =>{\r\n    query._then = callback\r\n    query._send(\"post\")\r\n    return query\r\n  }\r\n\r\n  //catch返回的数据，则是完整的服务器返回数据，包括了status、msg、code等，具体错误原因都在\r\n  query.catch = (callback) =>{\r\n    query._catch = callback\r\n    return query\r\n  }\r\n\r\n  query.config = (config) =>{\r\n    query._config = config\r\n    return query\r\n  }\r\n\r\n  query.binary_resp = () =>{\r\n    query._binary_resp = true\r\n    return query\r\n  }\r\n\r\n  //设置加载框静默，也就是不显示\r\n  query.loadingSilence = ()=>{\r\n    query._loadingSilence = true\r\n    return query\r\n  }\r\n\r\n  //设置tips静默，也就是不显示\r\n  query.tipsSilence = ()=>{\r\n    query._tipsSilence = true\r\n    return query\r\n  }\r\n\r\n  query.post = () =>{\r\n    query._send(\"post\")\r\n    return query\r\n  }\r\n\r\n  query.get = () =>{\r\n    query._send(\"get\")\r\n    return query\r\n  }\r\n  /******************************公开的函数定义******************************/\r\n\r\n  /* 默认参数定义 */\r\n  query._alreadyQuery = false\r\n  query._then = (msg)=>{}\r\n  query._catch = (msg)=>{}\r\n  query._data = {}\r\n  query._defResp = null\r\n  query._binary_resp = false\r\n  query._loadingSilence = false\r\n  query._tipsSilence = false\r\n  query._config = {headers: {'Content-Type': 'application/x-www-form-urlencoded', 'X-Requested-With': 'XMLHttpRequest'}}\r\n  /*****************************/\r\n\r\n  query._send = (type) =>{\r\n\r\n    if(query._alreadyQuery) return\r\n    query._alreadyQuery = true\r\n\r\n    if(duplicateQueryManager.isQuerying(query._url)){\r\n      console.log(\"重复请求了\" + query._url)\r\n      return\r\n    }\r\n\r\n    //如果有注册回调函数\r\n    if(preQueryCallback != null){\r\n      preQueryCallback(query)\r\n    }\r\n\r\n    //添加记录\r\n    duplicateQueryManager.add(query._url)\r\n\r\n    let q = null\r\n    if(type == \"post\"){\r\n      q = axios.post(query._url, preprocessQueryParameters(query._data), query._config)\r\n    }else{\r\n      q = axios.get(query._url, preprocessQueryParameters(query._data), query._config)\r\n    }\r\n\r\n    q.then((response) => {\r\n      duplicateQueryManager.remove(query._url)\r\n\r\n      let data = response.data\r\n      if(query._binary_resp && response.status==200){\r\n        query._then(data);\r\n        if(endQueryCallback != null){\r\n          endQueryCallback(query, null)\r\n        }\r\n        return;\r\n      }\r\n\r\n      if(endQueryCallback != null){\r\n        endQueryCallback(query, data)\r\n      }\r\n\r\n      data = mergeMap(data, query._defResp)\r\n      if(data.status == \"success\")\r\n        query._then(data.data)\r\n      else\r\n        query._catch(data.message)\r\n      \r\n    }).catch((e) => {\r\n      let response = e.response\r\n      let dispatchData = null\r\n      if(response == null){\r\n        //没有收到服务器的响应\r\n        dispatchData = {\r\n          status: \"error\",\r\n          code: \"NetworkError\",\r\n          message: e.message,\r\n          now: new Date()\r\n        }\r\n      }else{\r\n        dispatchData = response.data\r\n\r\n        //这里有两种情况，一种情况是从服务器收到的例如404、500等信号，直接使用response即可\r\n        //另一种是没有收到服务器信号，后端服务器挂掉了，这里返回的response是前端服务器控制的或者js控制的\r\n        //那么会没有msg属性，data属性是个string\r\n        if(!dispatchData.hasOwnProperty(\"message\")){\r\n          dispatchData = {\r\n            status: \"error\",\r\n            code: response.status,\r\n            message: response.data,\r\n            header: response.headers,\r\n            now: new Date()\r\n          }\r\n        }\r\n      }\r\n\r\n      dispatchData = mergeMap(dispatchData, query._defResp)\r\n      if(endQueryCallback != null){\r\n        endQueryCallback(query, dispatchData)\r\n      }\r\n      duplicateQueryManager.remove(query._url)\r\n      query._catch(dispatchData)\r\n    })\r\n  }\r\n  return query;\r\n};\r\n\r\nEcho.setPreQueryCallback = setPreQueryCallback\r\nEcho.setEndQueryCallback = setEndQueryCallback\r\n\r\nVue.prototype.$echo = Echo\r\nexport default Echo\n\n\n// WEBPACK FOOTER //\n// ./src/http/echo.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"\\n    错误\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73a6311b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/error.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./error.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./error.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73a6311b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./error.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/error.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        错误\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n    name: 'Error'\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/error.vue","<template>\r\n    <div class=\"v-body\">\r\n        <input type=\"file\" style=\"display: none\" ref=\"uploadImage\" @change=\"fileChange\" accept=\"image/jpeg, image/png\" multiple />\r\n        <el-container>\r\n            <el-aside width=\"800px\">\r\n                <canvas width=\"800px\" height=\"700px\" ref=\"previewImageCanvas\" class=\"detect-image\"></canvas>\r\n            </el-aside>\r\n            <el-main>\r\n                <el-button type=\"primary\" @click=\"dotest\">上传图像测试</el-button>\r\n                <p></p>\r\n                <el-input type=\"textarea\" :rows=\"32\" placeholder=\"检测结果\" v-model=\"detectResultJson\" class=\"detect-result-json\" :readonly=\"true\">\r\n                </el-input>\r\n            </el-main>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.v-body{\r\n    padding: 100px;\r\n}\r\n</style>\r\n<script>\r\nexport default {\r\n    name: 'Home',\r\n    data(){\r\n        return {\r\n            uploadFileSelectCallback: null,\r\n            detectResultJson: \"\"\r\n        }\r\n    },\r\n    methods: {\r\n        fileChange: function(){\r\n            let files = this.$refs.uploadImage.files;\r\n            if(files.length != 1){\r\n                this.$message.warning(\"请选择一个文件\");\r\n                return;\r\n            }\r\n\r\n            if(this.uploadFileSelectCallback)\r\n                this.uploadFileSelectCallback(files[0]);\r\n\r\n            this.$refs.uploadImage.value = null;\r\n        },\r\n        openFileDialog: function(callback){\r\n            this.uploadFileSelectCallback = callback;\r\n            this.$refs.uploadImage.click();\r\n        },\r\n        loadImage: function(url, callback){\r\n            let image = new Image();\r\n            image.onload = function(){\r\n                callback(image);\r\n            };\r\n            image.src = url;\r\n        },\r\n        drawImageAndLabel: function(image, boxarray){\r\n\r\n            this.detectResultJson = JSON.stringify(boxarray, undefined, 4);\r\n            let cvs = this.$refs.previewImageCanvas;\r\n            let context = cvs.getContext(\"2d\");\r\n            let imageWidth = image.width;\r\n            let imageHeight = image.height;\r\n            let canWidth = cvs.width;\r\n            let canHeight = cvs.height;\r\n            let scale = Math.min(canWidth / imageWidth, canHeight / imageHeight);\r\n            scale = Math.min(scale, 1);\r\n\r\n            let dx = (canWidth - imageWidth * scale) / 2;\r\n            let dy = (canHeight - imageHeight * scale) / 2;\r\n            let dr = canWidth - dx;\r\n            let db = canHeight - dy;\r\n            context.clearRect(0, 0, canWidth, canHeight);\r\n            context.drawImage(image, dx, dy, dr - dx + 1, db - dy + 1);\r\n\r\n            if(boxarray == null || boxarray.length == 0)\r\n                return;\r\n\r\n            context.font = \"26px 微软雅黑\";\r\n            context.save();\r\n            context.translate(dx, dy);\r\n            context.scale(scale, scale);\r\n\r\n            var colors = [\"#F0F\", \"#0FF\", \"#FF0\", \"#00F\", \"#0F0\", \"#F00\", \"#8F0\", \"#08F\", \"#0F8\", \"#88F\", \"#F80\"];\r\n            for(let i = 0; i < boxarray.length; ++i){\r\n                let box = boxarray[i];\r\n                let color = colors[box.class_label % colors.length];\r\n                let label = box.class_name;\r\n\r\n                context.beginPath();\r\n                context.lineWidth = \"5\";\r\n                context.strokeStyle = color;\r\n                context.rect(\r\n                    box.left, \r\n                    box.top, \r\n                    (box.right - box.left + 1), \r\n                    (box.bottom - box.top + 1));\r\n                context.stroke();\r\n\r\n                context.fillStyle = color;\r\n                context.font = \"25px 微软雅黑\";\r\n                context.fillText(label + \" \" + box.confidence.toFixed(2), box.left, box.top - 5);\r\n            }\r\n            context.restore();\r\n        },\r\n        dotest: function(){\r\n            var _this = this;\r\n            this.openFileDialog(function(file){\r\n                var reader = new FileReader();\r\n                reader.onload = function(e){ \r\n                    _this.loadImage(this.result, function(image){\r\n                        \r\n                        var token = \";base64,\";\r\n                        var base64_data = image.src;\r\n                        var token_begin = base64_data.indexOf(token);\r\n                        var clean_data = base64_data.substring(token_begin + token.length);\r\n                        // let sendData = new FormData();\r\n                        // sendData.append(\"format\", \"file\");\r\n                        // sendData.append(\"confidence\", 0.5);\r\n                        // sendData.append(\"imageFile\", file);\r\n                        Echo(\"/api/detectBase64Image\")\r\n                        .data(clean_data)\r\n                        .then((boxarray)=>{\r\n                            _this.drawImageAndLabel(image, boxarray);\r\n                        });\r\n                    });\r\n                };\r\n                reader.readAsDataURL(file);\r\n            })\r\n        },\r\n        init: function(){\r\n        }\r\n    },\r\n    mounted(){\r\n        this.init()\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"v-body\"},[_c('input',{ref:\"uploadImage\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/jpeg, image/png\",\"multiple\":\"\"},on:{\"change\":_vm.fileChange}}),_vm._v(\" \"),_c('el-container',[_c('el-aside',{attrs:{\"width\":\"800px\"}},[_c('canvas',{ref:\"previewImageCanvas\",staticClass:\"detect-image\",attrs:{\"width\":\"800px\",\"height\":\"700px\"}})]),_vm._v(\" \"),_c('el-main',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dotest}},[_vm._v(\"上传图像测试\")]),_vm._v(\" \"),_c('p'),_vm._v(\" \"),_c('el-input',{staticClass:\"detect-result-json\",attrs:{\"type\":\"textarea\",\"rows\":32,\"placeholder\":\"检测结果\",\"readonly\":true},model:{value:(_vm.detectResultJson),callback:function ($$v) {_vm.detectResultJson=$$v},expression:\"detectResultJson\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42ca69f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42ca69f4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42ca69f4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42ca69f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/home.vue\n// module id = null\n// module chunks = ","import ElementUI from 'element-ui'\r\nimport Vue from 'vue'\r\n\r\nfunction pack_opt(opt_or_message, title){\r\n\r\n  let opt = {}\r\n  if(typeof(opt_or_message) == \"string\"){\r\n    opt[\"message\"] = opt_or_message\r\n    opt[\"title\"] = title\r\n  }else{\r\n    opt = opt_or_message\r\n  }\r\n\r\n  if(!(\"duration\" in opt))\r\n    opt[\"duration\"] = 2000\r\n  return opt\r\n}\r\n\r\nfunction tips_success(opt_or_message, title = \"成功\"){\r\n  let opt = pack_opt(opt_or_message, title)\r\n  ElementUI.Notification.success(opt)\r\n}\r\n\r\nfunction tips_error(opt_or_message, title = \"错误\"){\r\n  let opt = pack_opt(opt_or_message, title)\r\n  ElementUI.Notification.error(opt)\r\n}\r\n\r\nfunction tips_info(opt_or_message, title = \"提示\"){\r\n  let opt = pack_opt(opt_or_message, title)\r\n  ElementUI.Notification.info(opt)\r\n}\r\n\r\nfunction tips_warning(opt_or_message, title = \"警告\"){\r\n  let opt = pack_opt(opt_or_message, title)\r\n  ElementUI.Notification.warning(opt)\r\n}\r\n\r\nfunction tips_tip(opt){\r\n  ElementUI.Notification(opt)\r\n}\r\n\r\nconst Tips = {\r\n  success: tips_success,\r\n  error: tips_error,\r\n  info: tips_info,\r\n  warning: tips_warning,\r\n  tip: tips_tip\r\n}\r\n\r\nVue.prototype.$tips = Tips\r\nexport default Tips\n\n\n// WEBPACK FOOTER //\n// ./src/tools/tips.js","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Echo from '@/http/echo'\r\nimport Error from \"@/components/error\"\r\nimport Home from \"@/components/home\"\r\nimport Tips from '@/tools/tips'\r\nimport { local } from 'd3'\r\n\r\nVue.use(Router)\r\nconst originalPush = Router.prototype.push\r\n\r\nRouter.prototype.push = function push(location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    component: Home\r\n  },\r\n  {\r\n    path: \"*\",\r\n    component: Error\r\n  }\r\n]\r\n\r\nconst router = new Router({\r\n  mode: 'history',\r\n  routes: routes\r\n})\r\n\r\nrouter.beforeEach(function(to, from, next){\r\n  return next()\r\n})\r\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./src/router/router.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        userInfo: \"\"\r\n    },\r\n    mutations: {\r\n        updateUser(state, info){\r\n            state.userInfo = info\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/vuex.js","\r\n\r\n\r\n\r\n\r\n\r\nfunction clone(obj) {\r\n\r\n    let o;\r\n    if (typeof obj == \"object\") {\r\n        if (obj === null) {\r\n            o = null;\r\n        } else {\r\n            if (obj instanceof Array) {\r\n                o = [];\r\n                for (let i = 0, len = obj.length; i < len; i++) {\r\n                    o.push(clone(obj[i]));\r\n                }\r\n            } else {\r\n                o = {};\r\n                for (let j in obj) {\r\n                    o[j] = clone(obj[j]);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        o = obj;\r\n    }\r\n    return o;\r\n}\r\n\r\nconst Tools = {\r\n    clone\r\n}\r\n\r\n\r\nexport default Tools\n\n\n// WEBPACK FOOTER //\n// ./src/tools/tools.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from '@/App'\r\nimport router from '@/router/router'\r\nimport store from '@/vuex/vuex'\r\nimport Echo from '@/http/echo.js'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport \"@/assets/bbicon/iconfont.css\"\r\nimport VueCookies from 'vue-cookies'\r\nimport Tips from \"@/tools/tips.js\"\r\nimport Tools from \"@/tools/tools.js\"\r\n\r\nVue.use(ElementUI)\r\nVue.use(VueCookies)\r\n\r\n//将需要的东西注入到全局\r\nwindow[\"Echo\"] = Echo\r\nwindow[\"Tips\"] = Tips\r\nwindow[\"Tools\"] = Tools\r\n\r\nVue.config.productionTip = false\r\n\r\n//请求前的时候打开loading\r\nlet loadingLayer = null\r\nEcho.setPreQueryCallback((query)=>{\r\n\r\n  if(query._loadingSilence)\r\n    return;\r\n\r\n  if(loadingLayer != null) \r\n    return\r\n\r\n  loadingLayer = ElementUI.Loading.service({\r\n    fullscreen: true,\r\n    lock: true,\r\n    text: \"加载中...\",\r\n    background: \"rgba(0, 0, 0, 0.5)\"\r\n    //spinner: 'el-icon-loading',\r\n    //target: \".data-content\"\r\n  })\r\n})\r\n\r\n//请求结束后，关闭loading\r\nEcho.setEndQueryCallback((query, data)=>{\r\n\r\n  if(loadingLayer != null){\r\n    loadingLayer.close()\r\n    loadingLayer = null\r\n  }\r\n\r\n  //如果不正确的结果返回，就提示错误\r\n  if(data && data.status != \"success\"){\r\n    if(!query._tipsSilence){\r\n      Tips.error(data.message)\r\n    }else{\r\n      console.log(\"请求结束静默，不提示：\" + data.msg)\r\n    }\r\n  }\r\n})\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  store,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}