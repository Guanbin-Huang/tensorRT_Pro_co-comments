webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},l,!1,function(e){n("mVEf")},null,null).exports,s=n("/ocq"),r=n("mtWM"),o=n.n(r),u=n("mw3O"),c=n.n(u);o.a.defaults.timeout=1e4,o.a.defaults.baseURL="",o.a.defaults.withCredentials=!1;const d=((f=new Object)._queryingURLs={},f.isQuerying=(e=>e in f._queryingURLs),f.add=(e=>{f._queryingURLs[e]=!0}),f.remove=(e=>{f.isQuerying(e)&&delete f._queryingURLs[e]}),f);var f;let p=null,g=null;function h(e,t){if(null==e)return t;if(null!=t)for(let n in t)e[n]=t[n];return e}function _(e){if("string"==typeof e)return e;let t={};for(let n in e){let a=e[n];"object"==typeof a&&(a=JSON.stringify(a)),t[n]=a}return c.a.stringify(t)}const m=e=>{var t=new Object;return t._url=e,t.data=(e=>(t._data=e,t)),t.defResp=(e=>(t._defResp=e,t)),t.then=(e=>(t._then=e,t._send("post"),t)),t.catch=(e=>(t._catch=e,t)),t.config=(e=>(t._config=e,t)),t.binary_resp=(()=>(t._binary_resp=!0,t)),t.loadingSilence=(()=>(t._loadingSilence=!0,t)),t.tipsSilence=(()=>(t._tipsSilence=!0,t)),t.post=(()=>(t._send("post"),t)),t.get=(()=>(t._send("get"),t)),t._alreadyQuery=!1,t._then=(e=>{}),t._catch=(e=>{}),t._data={},t._defResp=null,t._binary_resp=!1,t._loadingSilence=!1,t._tipsSilence=!1,t._config={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}},t._send=(e=>{if(t._alreadyQuery)return;if(t._alreadyQuery=!0,d.isQuerying(t._url))return void console.log("重复请求了"+t._url);null!=p&&p(t),d.add(t._url);let n=null;(n="post"==e?o.a.post(t._url,_(t._data),t._config):o.a.get(t._url,_(t._data),t._config)).then(e=>{d.remove(t._url);let n=e.data;if(t._binary_resp&&200==e.status)return t._then(n),void(null!=g&&g(t,null));null!=g&&g(t,n),"success"==(n=h(n,t._defResp)).status?t._then(n.data):t._catch(n.message)}).catch(e=>{let n=e.response,a=null;null==n?a={status:"error",code:"NetworkError",message:e.message,now:new Date}:(a=n.data).hasOwnProperty("message")||(a={status:"error",code:n.status,message:n.data,header:n.headers,now:new Date}),a=h(a,t._defResp),null!=g&&g(t,a),d.remove(t._url),t._catch(a)})}),t};m.setPreQueryCallback=function(e){p=e},m.setEndQueryCallback=function(e){g=e},a.default.prototype.$echo=m;var v=m,y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    错误\n")])},staticRenderFns:[]},w=n("VU/8")({name:"Error"},y,!1,null,null,null).exports,b={name:"Home",data:()=>({uploadFileSelectCallback:null,detectResultJson:""}),methods:{fileChange:function(){let e=this.$refs.uploadImage.files;1==e.length?(this.uploadFileSelectCallback&&this.uploadFileSelectCallback(e[0]),this.$refs.uploadImage.value=null):this.$message.warning("请选择一个文件")},openFileDialog:function(e){this.uploadFileSelectCallback=e,this.$refs.uploadImage.click()},loadImage:function(e,t){let n=new Image;n.onload=function(){t(n)},n.src=e},drawImageAndLabel:function(e,t){this.detectResultJson=JSON.stringify(t,void 0,4);let n=this.$refs.previewImageCanvas,a=n.getContext("2d"),l=e.width,i=e.height,s=n.width,r=n.height,o=Math.min(s/l,r/i),u=(s-l*(o=Math.min(o,1)))/2,c=(r-i*o)/2,d=s-u,f=r-c;if(a.clearRect(0,0,s,r),a.drawImage(e,u,c,d-u+1,f-c+1),null!=t&&0!=t.length){a.font="26px 微软雅黑",a.save(),a.translate(u,c),a.scale(o,o);var p=["#F0F","#0FF","#FF0","#00F","#0F0","#F00","#8F0","#08F","#0F8","#88F","#F80"];for(let e=0;e<t.length;++e){let n=t[e],l=p[n.class_label%p.length],i=n.class_name;a.beginPath(),a.lineWidth="5",a.strokeStyle=l,a.rect(n.left,n.top,n.right-n.left+1,n.bottom-n.top+1),a.stroke(),a.fillStyle=l,a.font="25px 微软雅黑",a.fillText(i+" "+n.confidence.toFixed(2),n.left,n.top-5)}a.restore()}},dotest:function(){var e=this;this.openFileDialog(function(t){var n=new FileReader;n.onload=function(t){e.loadImage(this.result,function(t){var n=t.src,a=n.indexOf(";base64,"),l=n.substring(a+";base64,".length);Echo("/api/detectBase64Image").data(l).then(n=>{e.drawImageAndLabel(t,n)})})},n.readAsDataURL(t)})},init:function(){}},mounted(){this.init()}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-body"},[n("input",{ref:"uploadImage",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg, image/png",multiple:""},on:{change:e.fileChange}}),e._v(" "),n("el-container",[n("el-aside",{attrs:{width:"800px"}},[n("canvas",{ref:"previewImageCanvas",staticClass:"detect-image",attrs:{width:"800px",height:"700px"}})]),e._v(" "),n("el-main",[n("el-button",{attrs:{type:"primary"},on:{click:e.dotest}},[e._v("上传图像测试")]),e._v(" "),n("p"),e._v(" "),n("el-input",{staticClass:"detect-result-json",attrs:{type:"textarea",rows:32,placeholder:"检测结果",readonly:!0},model:{value:e.detectResultJson,callback:function(t){e.detectResultJson=t},expression:"detectResultJson"}})],1)],1)],1)},staticRenderFns:[]};var R=n("VU/8")(b,F,!1,function(e){n("i4fb")},"data-v-42ca69f4",null).exports,C=n("zL8q"),S=n.n(C);function k(e,t){let n={};return"string"==typeof e?(n.message=e,n.title=t):n=e,"duration"in n||(n.duration=2e3),n}const x={success:function(e,t="成功"){let n=k(e,t);S.a.Notification.success(n)},error:function(e,t="错误"){let n=k(e,t);S.a.Notification.error(n)},info:function(e,t="提示"){let n=k(e,t);S.a.Notification.info(n)},warning:function(e,t="警告"){let n=k(e,t);S.a.Notification.warning(n)},tip:function(e){S.a.Notification(e)}};a.default.prototype.$tips=x;var I=x;n("vwbq");a.default.use(s.a);const E=s.a.prototype.push;s.a.prototype.push=function(e){return E.call(this,e).catch(e=>e)};const L=[{path:"/",component:R},{path:"*",component:w}],N=new s.a({mode:"history",routes:L});N.beforeEach(function(e,t,n){return n()});var U=N,J=n("NYxO");a.default.use(J.a);var Q=new J.a.Store({state:{userInfo:""},mutations:{updateUser(e,t){e.userInfo=t}}}),$=(n("tvR6"),n("gJwn"),n("ppUw")),q=n.n($);var O={clone:function e(t){let n;if("object"==typeof t)if(null===t)n=null;else if(t instanceof Array){n=[];for(let a=0,l=t.length;a<l;a++)n.push(e(t[a]))}else{n={};for(let a in t)n[a]=e(t[a])}else n=t;return n}};a.default.use(S.a),a.default.use(q.a),window.Echo=v,window.Tips=I,window.Tools=O,a.default.config.productionTip=!1;let j=null;v.setPreQueryCallback(e=>{e._loadingSilence||null==j&&(j=S.a.Loading.service({fullscreen:!0,lock:!0,text:"加载中...",background:"rgba(0, 0, 0, 0.5)"}))}),v.setEndQueryCallback((e,t)=>{null!=j&&(j.close(),j=null),t&&"success"!=t.status&&(e._tipsSilence?console.log("请求结束静默，不提示："+t.msg):I.error(t.message))}),new a.default({el:"#app",router:U,store:Q,components:{App:i},template:"<App/>"})},gJwn:function(e,t){},i4fb:function(e,t){},mVEf:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c6a9a788725bb8db467d.js.map